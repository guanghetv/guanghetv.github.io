<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Appium Test Case-Python篇 | 光合新知技术博客</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Appium Test Case-Python篇</h1><a id="logo" href="/.">光合新知技术博客</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/bookshelf"><i class="fa fa-book"> 书单</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Appium Test Case-Python篇</h1><div class="post-meta">Aug 5, 2016<span> | </span><span class="category"><a href="/categories/tech/">tech</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2016/08/05/AppiumTestCase-Python/" href="/2016/08/05/AppiumTestCase-Python/#comments" class="ds-thread-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#Appium的Client-Server结构"><span class="toc-number">1.</span> <span class="toc-text">Appium的Client/Server结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Appium-Python-Client"><span class="toc-number">2.</span> <span class="toc-text">Appium-Python-Client</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTMLTestRunner"><span class="toc-number">3.</span> <span class="toc-text">HTMLTestRunner</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Appium的Session"><span class="toc-number">4.</span> <span class="toc-text">Appium的Session</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Appium的Desired-Capabilities"><span class="toc-number">5.</span> <span class="toc-text">Appium的Desired Capabilities</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#控件定位"><span class="toc-number">6.</span> <span class="toc-text">控件定位</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#常用方法"><span class="toc-number">7.</span> <span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#完整用例"><span class="toc-number">8.</span> <span class="toc-text">完整用例</span></a></li></ol></div></div><div class="post-content"><h4 id="Appium的Client-Server结构"><a href="#Appium的Client-Server结构" class="headerlink" title="Appium的Client/Server结构"></a>Appium的Client/Server结构</h4><p>appium的核心其实是一个暴露了一系列REST API的server</p>
<p>这个server的功能其实很简单：监听一个端口，然后接收由client发送来的command。翻译这些command，把这些command转成移动设备可以理解的形式发送给移动设备，然后移动设备执行完这些command后把执行结果返回给appium server，appium server再把执行结果返回给client。</p>
<p>在这里client其实就是发起command的设备，一般来说就是我们代码执行的机器，执行appium测试代码的机器。狭义点理解，可以把client理解成是代码，这些代码可以是java/ruby/python/js的，只要它实现了webdriver标准协议就可以。</p>
<h4 id="Appium-Python-Client"><a href="#Appium-Python-Client" class="headerlink" title="Appium-Python-Client"></a>Appium-Python-Client</h4><p>appium client是对webdriver原生api的一些扩展和封装。它可以帮助我们更容易的写出用例，写出更好懂的用例，并且它是配合原生的webdriver来使用的，因此二者必须配合使用缺一不可。</p>
<p>最推荐的安装方法:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip <span class="keyword">install</span> Appium-Python-<span class="keyword">Client</span></div></pre></td></tr></table></figure>
<h4 id="HTMLTestRunner"><a href="#HTMLTestRunner" class="headerlink" title="HTMLTestRunner"></a>HTMLTestRunner</h4><p><a href="http://tungwaiyip.info/software/HTMLTestRunner.html" target="_blank" rel="external">下载传送门</a></p>
<p>HTMLTestRunner是Python标准库中单元测试模块的扩展，它生成易于使用的html测试报告</p>
<p>下载HTMLTestRunner.py文件后，把HTMLTestRunner文件放到Python27\Lib的目录下即可</p>
<p>具体使用方法见文章末尾处的完整用例代码</p>
<h4 id="Appium的Session"><a href="#Appium的Session" class="headerlink" title="Appium的Session"></a>Appium的Session</h4><p>session就是一个会话，在webdriver/appium，你的所有工作永远都是在session start后才可以进行的。一般来说，通过POST /session这个URL，然后传入Desired Capabilities就可以开启session了。</p>
<p>开启session后，会返回一个全局唯一的session id，以后几乎所有的请求都必须带上这个session id，因为这个seesion id代表了你所打开的浏览器或者是移动设备的模拟器。</p>
<h4 id="Appium的Desired-Capabilities"><a href="#Appium的Desired-Capabilities" class="headerlink" title="Appium的Desired Capabilities"></a>Appium的Desired Capabilities</h4><p>Desired Capabilities在启动session的时候是必须提供的。</p>
<p>Desired Capabilities本质上是key value的对象，它告诉appium server这样一些事情：</p>
<ul>
<li>本次测试是启动浏览器还是启动移动设备？</li>
<li>是启动andorid还是启动ios？</li>
<li>启动android时，app的package是什么？</li>
<li>启动android时，app的activity是什么？</li>
</ul>
<p>Appium的Desired Capabilities是扩展了webdriver的Desired Capabilities的，下面是一些通用配置：</p>
<ul>
<li>automationName：使用哪种自动化引擎。appium（默认）还是Selendroid？</li>
<li>platformName：使用哪种移动平台。iOS, Android, orFirefoxOS？</li>
<li>deviceName：启动哪种设备，是真机还是模拟器？iPhone Simulator, iPad Simulator, iPhone Retina 4-inch, Android Emulator, Galaxy S4, etc…</li>
<li>app：应用的绝对路径，注意一定是绝对路径。如果指定了appPackage和appActivity的话，这个属性是可以不设置的。另外这个属性和browserName属性是冲突的。</li>
<li>browserName：移动浏览器的名称。比如Safari’ for iOS and ‘Chrome’, ‘Chromium’, or ‘Browser’ for Android；与app属性互斥。</li>
</ul>
<p>下面的属性是android平台特定的：</p>
<ul>
<li>appActivity：待测试的app的Activity名字。比如com.yangcong345.android.phone.presentation.activity.SplashActivity</li>
<li>appPackage：待测试的app的java package。比如com.yangcong345.android.phone</li>
</ul>
<h4 id="控件定位"><a href="#控件定位" class="headerlink" title="控件定位"></a>控件定位</h4><p>在appium的定位方法中，下面这些方法是可以为我们使用的。也就是说，我们通过下面几个约定好的方式，按照webdriver和appium的DSL（自行搜索并理解）进行控件特征的描述和定位。</p>
<ul>
<li>find by “class” (ui component type，andorid上可以是android.widget.TextView)</li>
<li>find by “xpath” (an abstract representation of a path to an element, with certain constraints，由于appium的xpath库不完备的原因，这个不太推荐)</li>
<li>find by “id”(android上是控件的resource id)</li>
<li>find by name(如android的Button的名字)</li>
</ul>
<p>定位方法代码展示:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">self<span class="selector-class">.driver</span><span class="selector-class">.find_elements_by_class_name</span>(<span class="string">'android.widget.TextView'</span>)</div><div class="line"></div><div class="line">self<span class="selector-class">.driver</span><span class="selector-class">.find_element_by_xpath</span>(<span class="string">"//android.widget.LinearLayout[1]/android.widget.FrameLayout[1]/android.view.ViewGroup[1]/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.widget.LinearLayout[1]/android.widget.LinearLayout[1]/android.widget.LinearLayout[1]/android.widget.Button[1]"</span>)</div><div class="line"></div><div class="line">self<span class="selector-class">.driver</span><span class="selector-class">.find_element_by_id</span>(<span class="string">'com.yangcong345.android.phone:id/rbStudent'</span>)</div><div class="line"></div><div class="line">self<span class="selector-class">.driver</span><span class="selector-class">.find_element_by_name</span>(u<span class="string">'人教版'</span>)</div></pre></td></tr></table></figure>
<h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h4><p><a href="https://github.com/appium/sample-code/tree/master/sample-code/examples/python" target="_blank" rel="external">官方Demo传送门</a></p>
<p>当定位到一个控件或是一个控件组的时候（find_element跟find_elements的区别），就可以对控件执行一些事件动作，比如点击，滑动等</p>
<p>代码展示:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">self<span class="selector-class">.driver</span><span class="selector-class">.find_element_by_id</span>(<span class="string">'com.yangcong345.android.phone:id/rbStudent'</span>).click()</div><div class="line"></div><div class="line">els = el.find_elements_by_class_name(<span class="string">'android.widget.TextView'</span>)</div><div class="line">self<span class="selector-class">.driver</span><span class="selector-class">.scroll</span>(els[len(els) - <span class="number">1</span>], els[<span class="number">0</span>])</div></pre></td></tr></table></figure>
<p><strong>重点:进度条如何定位到末尾</strong></p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">el = self.<span class="built_in">driver</span>.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/mediacontroller_progress'</span>)</div><div class="line">self.assertIsNotNone(el)</div><div class="line"></div><div class="line">end = el.<span class="built_in">size</span>.get(<span class="string">'width'</span>)</div><div class="line">y = el.<span class="built_in">location</span>.get(<span class="string">'y'</span>)</div><div class="line"><span class="built_in">action</span> = TouchAction(self.<span class="built_in">driver</span>)</div><div class="line"><span class="built_in">action</span>.tap(None, end + <span class="number">95</span>, y).perform()<span class="comment">//此处tap方法有个bug，就是首个参数需要传None才能使action的绝对定位生效</span></div></pre></td></tr></table></figure>
<p>还有常用的方法有：</p>
<ul>
<li>输入框输入字符</li>
<li>获取控件的属性</li>
<li>一些断言方法 </li>
</ul>
<p>代码展示:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">self</span><span class="selector-class">.driver</span><span class="selector-class">.find_element_by_id</span>(<span class="string">'com.yangcong345.android.phone:id/etUserName'</span>)<span class="selector-class">.send_keys</span>(<span class="string">'qq3@qqq.com'</span>)</div><div class="line"></div><div class="line"><span class="selector-tag">el</span><span class="selector-class">.get_attribute</span>(<span class="string">'checked'</span>)<span class="comment">//返回的是字符串</span></div><div class="line"></div><div class="line"><span class="selector-tag">self</span><span class="selector-class">.assertEqual</span>(el.get_attribute(<span class="string">'checked'</span>), <span class="string">'true'</span>)</div><div class="line"><span class="selector-tag">self</span><span class="selector-class">.assertIsNotNone</span>(el)</div><div class="line"><span class="comment">//还有很多断言方法在此不列举了</span></div></pre></td></tr></table></figure>
<h4 id="完整用例"><a href="#完整用例" class="headerlink" title="完整用例"></a>完整用例</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding=utf-8</span></div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> unittest, sys, time, re, datetime</div><div class="line"><span class="keyword">import</span> HTMLTestRunner</div><div class="line"><span class="keyword">from</span> appium <span class="keyword">import</span> webdriver</div><div class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">from</span> appium.webdriver.common.touch_action <span class="keyword">import</span> TouchAction</div><div class="line"><span class="keyword">from</span> appium.webdriver.common.multi_action <span class="keyword">import</span> MultiAction</div><div class="line"></div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</div><div class="line"></div><div class="line">cwd = os.getcwd()</div><div class="line">phone_student = <span class="string">'erwa@qq.com'</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleAndroidTests</span><span class="params">(unittest.TestCase)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></div><div class="line">        desired_caps = &#123;&#125;</div><div class="line">        desired_caps[<span class="string">'appium-version'</span>] = <span class="string">'1.0'</span></div><div class="line">        desired_caps[<span class="string">'platformName'</span>] = <span class="string">'Android'</span></div><div class="line">        desired_caps[<span class="string">'platformVersion'</span>] = <span class="string">'5.0.1'</span></div><div class="line">        desired_caps[<span class="string">'deviceName'</span>] = <span class="string">'192.168.56.101'</span></div><div class="line">        desired_caps[<span class="string">'app'</span>] = os.path.abspath(cwd + <span class="string">'/YCMath_Android_V2.7.0_guanghetv.apk'</span>)</div><div class="line">        desired_caps[<span class="string">'appPackage'</span>] = <span class="string">'com.yangcong345.android.phone'</span></div><div class="line">        desired_caps[<span class="string">'appActivity'</span>] = <span class="string">'com.yangcong345.android.phone.presentation.activity.SplashActivity'</span></div><div class="line"></div><div class="line">        self.driver = webdriver.Remote(<span class="string">'http://127.0.0.1:4723/wd/hub'</span>, desired_caps)</div><div class="line">        self.driver.implicitly_wait(<span class="number">60</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># end the session</span></div><div class="line">        self.driver.quit()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">input_name_pwd</span><span class="params">(self, name, pwd)</span>:</span></div><div class="line">        self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/etUserName'</span>).send_keys(name)</div><div class="line">        self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/etPwd'</span>).send_keys(pwd)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self)</span>:</span></div><div class="line">        self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/btn_login'</span>).click()</div><div class="line">        self.input_name_pwd(phone_student, <span class="string">'123456'</span>)</div><div class="line">        self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/btnLogin'</span>).click()</div><div class="line">        sleep(<span class="number">3</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_chapter</span><span class="params">(self)</span>:</span></div><div class="line">        self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/mask_bottom'</span>).click()</div><div class="line">        el = self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/tabs'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        els = el.find_elements_by_class_name(<span class="string">'android.widget.TextView'</span>)</div><div class="line">        self.driver.scroll(els[len(els) - <span class="number">1</span>], els[<span class="number">0</span>])</div><div class="line">        sleep(<span class="number">1</span>)</div><div class="line">        el = self.driver.find_element_by_name(<span class="string">u'不等式与不等式组'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el.click()</div><div class="line">        sleep(<span class="number">3</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_theme</span><span class="params">(self)</span>:</span></div><div class="line">        el = self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/exp_lv'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el = self.driver.find_element_by_name(<span class="string">u'不等式的基本概念'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el.click()</div><div class="line">        sleep(<span class="number">3</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_topic</span><span class="params">(self, name)</span>:</span></div><div class="line">        el = self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/recycler_view'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el = self.driver.find_element_by_name(name)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el.click()</div><div class="line">        sleep(<span class="number">3</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_small_video</span><span class="params">(self)</span>:</span></div><div class="line">        el = self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/btn_close'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el.click()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">seek_to_end</span><span class="params">(self)</span>:</span></div><div class="line">        self.close_small_video()</div><div class="line"></div><div class="line">        el = self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/mediacontroller_progress'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line"></div><div class="line">        end = el.size.get(<span class="string">'width'</span>)</div><div class="line">        y = el.location.get(<span class="string">'y'</span>)</div><div class="line">        action = TouchAction(self.driver)</div><div class="line">        action.tap(<span class="keyword">None</span>, end + <span class="number">95</span>, y).perform()</div><div class="line">        sleep(<span class="number">3</span>)</div><div class="line"></div><div class="line">        self.close_small_video()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">click_rest</span><span class="params">(self)</span>:</span></div><div class="line">        el = self.driver.find_element_by_name(<span class="string">u'先休息一下'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el.click()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">module_has_video</span><span class="params">(self)</span>:</span></div><div class="line">        el = self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/recycler_view'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el = el.find_element_by_name(<span class="string">u'视频讲解'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_module_video</span><span class="params">(self)</span>:</span></div><div class="line">        el = self.driver.find_element_by_id(<span class="string">'com.yangcong345.android.phone:id/recycler_view'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el = el.find_element_by_name(<span class="string">u'视频讲解'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line">        el.click()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_at_theme</span><span class="params">(self)</span>:</span></div><div class="line">        el = self.driver.find_element_by_name(<span class="string">u'完成度'</span>)</div><div class="line">        self.assertIsNotNone(el)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_3_1_3</span><span class="params">(self)</span>:</span></div><div class="line">        self.login()</div><div class="line">        self.open_chapter()</div><div class="line">        self.open_theme()</div><div class="line">        self.open_topic(<span class="string">u'不等式引入'</span>)</div><div class="line">        self.module_has_video()</div><div class="line">        self.open_module_video()</div><div class="line">        self.seek_to_end()</div><div class="line">        self.click_rest()</div><div class="line">        self.is_at_theme()</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    suite = unittest.TestSuite()</div><div class="line">    suite.addTest(</div><div class="line">        unittest.defaultTestLoader.loadTestsFromTestCase(SimpleAndroidTests)</div><div class="line">    )</div><div class="line">    timestr = time.strftime(<span class="string">'%Y%m%d%H%M%S'</span>, time.localtime(time.time()))</div><div class="line">    filename = os.path.abspath(cwd + <span class="string">'/result'</span>) + <span class="string">"/result_"</span> + timestr + <span class="string">".html"</span></div><div class="line">    <span class="keyword">print</span> (filename)</div><div class="line">    fp = open(filename, <span class="string">'wb'</span>)</div><div class="line">    runner = HTMLTestRunner.HTMLTestRunner(</div><div class="line">        stream=fp,</div><div class="line">        title=<span class="string">'测试结果'</span>,</div><div class="line">        description=<span class="string">'测试报告'</span></div><div class="line">    )</div><div class="line">    runner.run(suite)</div><div class="line">    fp.close()  <span class="comment"># 测试报告关闭</span></div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2016/08/05/AppiumTestCase-Python/" data-id="ciwhh0l1t006efraz2q9fx86x" class="article-share-link">分享到</a><div class="tags"><a href="/tags/CI-Appium/">CI,Appium</a></div><div class="post-nav"><a href="/2016/12/09/2015-12-8-scapy/" class="pre">scapy与路由轨迹图</a><a href="/2016/07/27/how-to-use-react-native-navigator/" class="next">如何使用react native中的Navigator组件</a></div><div data-thread-key="2016/08/05/AppiumTestCase-Python/" data-title="Appium Test Case-Python篇" data-url="http://yoursite.com/2016/08/05/AppiumTestCase-Python/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2016/08/05/AppiumTestCase-Python/" data-title="Appium Test Case-Python篇" data-url="http://yoursite.com/2016/08/05/AppiumTestCase-Python/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/news/">news</a><span class="category-list-count">76</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech/">tech</a><span class="category-list-count">35</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/android-nosql-realm-couchbase/" style="font-size: 15px;">android,nosql,realm,couchbase</a> <a href="/tags/CI-Appium/" style="font-size: 15px;">CI,Appium</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/12/09/2015-12-8-scapy/">scapy与路由轨迹图</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/05/AppiumTestCase-Python/">Appium Test Case-Python篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/how-to-use-react-native-navigator/">如何使用react native中的Navigator组件</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/25/jinkens-PitRecords/">Jinkens+踩坑纪录</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/22/jinkens-iOSTest/">Jinkens+iOS测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/22/appium-nodeTest/">Appium+nodeJS测试用例编写</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/06/recovering-a-wiredtiger-collection-from-a-corrupt-wt-file/">从损坏的wt文件中恢复出WiredTiger集合</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/13/best-practice-of-config-for-nodejs-projects/">Nodejs项目配置文件最佳实践</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/16/appium-test/">Appium+Eclipse编写测试用例</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/16/appium-config/">Mac环境下如何配置Appium</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://yangcong345.com/" title="洋葱数学官网" target="_blank">洋葱数学官网</a><ul></ul><a href="https://github.com/guanghetv/" title="Github主页" target="_blank">Github主页</a><ul></ul><a href="https://facebook.github.io/react-native/" title="ReactNative" target="_blank">ReactNative</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">光合新知技术博客.</a> Tech<a rel="nofollow" target="_blank" href="https://hexo.io"></a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"></a> <a rel="nofollow" target="_blank" href="https://github.com/pagecho"></a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'antsun'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>