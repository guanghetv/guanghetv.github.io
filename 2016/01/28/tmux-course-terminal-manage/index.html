<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>使用tmux、tmuxinator管理你的终端窗口 | 光合新知技术博客</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">使用tmux、tmuxinator管理你的终端窗口</h1><a id="logo" href="/.">光合新知技术博客</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/bookshelf"><i class="fa fa-book"> 书单</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">使用tmux、tmuxinator管理你的终端窗口</h1><div class="post-meta">Jan 28, 2016<span> | </span><span class="category"><a href="/categories/tech/">tech</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2016/01/28/tmux-course-terminal-manage/" href="/2016/01/28/tmux-course-terminal-manage/#comments" class="ds-thread-count"></a><div class="post-content"><p>作者：<a href="http://www.suisuijiang.com" target="_blank" rel="external">碎碎酱</a></p>
<p><a href="https://tmux.github.io/" target="_blank" rel="external">tmux</a>是什么？tmux是一个优秀的终端复用软件，类似GNU Screen，但来自于OpenBSD，采用BSD授权。使用它最直观的好处就是，通过一个终端登录远程主机并运行tmux后，在其中可以开启多个控制台而无需再“浪费”多余的终端来连接这台远程主机。</p>
<p>当然，仅仅是用来切分窗口的话，tmux并不亮眼，考虑下你是否遇到过以下情形：</p>
<ol>
<li>在公司时，开了一堆vim、log和debug窗口，下班回家后，灵感突发，SSH连上公司机器，然后重新打开各种窗口。。。囧~ 瞬间就没心情了。</li>
<li>在服务器上调试程序，开了一堆窗口，有事需要出去一下，回来的时候发现SSH都超时了，<code>broken pipe</code>。。。FUCK，如果你使用tmux的话，就不会有这个问题。</li>
</ol>
<h2 id="tmux概念"><a href="#tmux概念" class="headerlink" title="tmux概念"></a>tmux概念</h2><p>tmux是典型的C/S架构，包含如下概念：</p>
<ol>
<li>Session：会话，tmux使用会话管理不同任务，你可以创建用于work的会话、或者用于play的会话，随时可以切换不同的会话。</li>
<li>Window：窗口，tmux会话可以包含多个窗口，每个窗口都是一个完整的终端。</li>
<li>Pane：窗格，窗口可以切分出任意数量、任意大小的窗格，每个窗格均是一个shell终端。</li>
</ol>
<h2 id="tmux安装"><a href="#tmux安装" class="headerlink" title="tmux安装"></a>tmux安装</h2><h3 id="在linux中安装："><a href="#在linux中安装：" class="headerlink" title="在linux中安装："></a>在<em>linux</em>中安装：</h3><p>下载<a href="https://github.com/tmux/tmux/releases/download/2.1/tmux-2.1.tar.gz" target="_blank" rel="external">tmux-2.1.tar.gz</a>，解压并进入tmux目录，执行<code>./configure &amp;&amp; make</code>构建程序，再执行<code>sudo make install</code>安装应用。</p>
<h3 id="在ubuntu中安装："><a href="#在ubuntu中安装：" class="headerlink" title="在ubuntu中安装："></a>在<em>ubuntu</em>中安装：</h3><p>在终端输入<code>sudo apt-get install tmux</code></p>
<h3 id="在MAC中安装："><a href="#在MAC中安装：" class="headerlink" title="在MAC中安装："></a>在<em>MAC</em>中安装：</h3><p>首先安装Homebrew，已安装过可以跳过此步。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ruby <span class="_">-e</span> <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></div></pre></td></tr></table></figure>
<p>安装tmux：<code>brew install tmux</code></p>
<h2 id="tmux使用"><a href="#tmux使用" class="headerlink" title="tmux使用"></a>tmux使用</h2><p>在终端输入<code>tumx</code>，即可进入tmux环境。</p>
<h3 id="tmux快捷键"><a href="#tmux快捷键" class="headerlink" title="tmux快捷键"></a>tmux快捷键</h3><p>tmux为了使快捷键不与系统快捷键冲突，需要使用快捷键前缀来组合快捷键，默认的快捷键前缀是C-b(Ctrl+B一起按)，你可以把这个快捷键理解成vim的命令模式，按下C-b后进入命令模式，再按下不同的按键执行对应的功能。</p>
<p>因为C-b不太容易按，可以选择修改为自己顺手的按键，在<code>~/.tmux.conf</code>中添加下列内容，将其修改为C-a：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">unbind C-b</div><div class="line"><span class="built_in">set</span> -g prefix C<span class="_">-a</span></div></pre></td></tr></table></figure>
<h3 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h3><p>使用C-b + ?可以查看所有可用命令以及相应的快捷键。</p>
<p>常用的命令有：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">prefix Space            next-layout</div><div class="line">prefix "                <span class="keyword">split</span>-<span class="keyword">window</span></div><div class="line">prefix %                <span class="keyword">split</span>-<span class="keyword">window</span> -<span class="built_in">h</span></div><div class="line">prefix (                switch-client -p</div><div class="line">prefix )                switch-client -<span class="keyword">n</span></div><div class="line">prefix [num:0-9]        select-<span class="keyword">window</span> -t :=[num:0-9]</div><div class="line">prefix p                previous-<span class="keyword">window</span></div><div class="line">prefix <span class="keyword">n</span>                next-<span class="keyword">window</span></div><div class="line">prefix c                new-<span class="keyword">window</span></div><div class="line">prefix :                command-prompt</div><div class="line">prefix C-Up             resize-pane -<span class="keyword">U</span></div><div class="line">prefix C-Down           resize-pane -<span class="built_in">D</span></div><div class="line">prefix C-Left           resize-pane -<span class="keyword">L</span></div><div class="line">prefix C-Right          resize-pane -<span class="built_in">R</span></div><div class="line">prefix &#123;                swap-pane -<span class="keyword">U</span></div><div class="line">prefix &#125;                swap-pane -<span class="built_in">D</span></div></pre></td></tr></table></figure>
<h2 id="tmux实用工具：Tmuxinator"><a href="#tmux实用工具：Tmuxinator" class="headerlink" title="tmux实用工具：Tmuxinator"></a>tmux实用工具：Tmuxinator</h2><p>假如你需要经常创建tmux会话，它包含三个窗格：vim、debug和shell，并且每个窗格需要不同的大小。又或者，你又临时投入另一项工作，需要打开多个终端。你可能会想，如果仅需一条命令就可以做的该多好，好的，tmuxinator出场了。</p>
<p><a href="https://github.com/tmuxinator/tmuxinator" target="_blank" rel="external">Tmuxinator</a> 是一个 Ruby 的 gem 包，可用于创建 Tmux 的会话。它的工作方式是先在配置文件中定义会话中的细节，然后用 1 条命令创建出这些会话。下面就让我们看看如何安装 Tmuxinator 以及如何添加配置来为指定项目开启一个会话。可以通过运行如下命令安装 Tmuxinator 的 gem 包。</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="keyword">install</span> tmuxinator</div></pre></td></tr></table></figure>
<p>安装好之后，就可以在终端中使用<code>tmuxinator</code>或者缩写<code>mux</code>来启动Tmuxinator了。</p>
<p>首先让我们创建一个工程：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mux <span class="keyword">new</span> project0</div></pre></td></tr></table></figure>
<p>tmuxinator会在<code>~/.tmuxinator/</code>目录中创建<code>project0.yml</code>文件，编辑<code>project0.yml</code>，写入下列内容(<strong>重点提醒：书写时要使用空格缩进，且严格按照图示缩进对其，否则会报语法错误！</strong>)：</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"># ~/.tmuxinator/project0.yml</div><div class="line"></div><div class="line">name: project0</div><div class="line">root: ~/</div><div class="line"></div><div class="line">windows:</div><div class="line">  -<span class="ruby"> <span class="symbol">editor:</span></span></div><div class="line">      layout: main-vertical</div><div class="line">      panes:</div><div class="line">        -<span class="ruby"> vim</span></div><div class="line">        -<span class="ruby"> top</span></div><div class="line">  -<span class="ruby"> <span class="symbol">ls:</span> ls</span></div><div class="line">  -<span class="ruby"> <span class="symbol">netconfig:</span> ifconfig</span></div></pre></td></tr></table></figure>
<p>启动刚刚创建的项目：</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mux <span class="literal">start</span> project0</div></pre></td></tr></table></figure>
<p>你会看到，我们的tmux自动的启动了一个tmux会话，它包含三个窗口，其中第一个窗口包含两个窗格，每个窗体/窗格均执行了指定任务。</p>
<h2 id="在Tmuxinator中配置layout"><a href="#在Tmuxinator中配置layout" class="headerlink" title="在Tmuxinator中配置layout"></a>在Tmuxinator中配置layout</h2><p>我们可能会需要指定窗格的排班规则，tmuxinator支持设置tmux中的5种默认layout样式：</p>
<pre><code>even-horizontal
         Panes are spread out evenly from left to right across the window.

even-vertical
         Panes are spread evenly from top to bottom.

 main-horizontal
         A large (main) pane is shown at the top of the window and the
         remaining panes are spread from left to right in the leftover
         space at the bottom.  Use the main-pane-height window option to
         specify the height of the top pane.

 main-vertical
         Similar to main-horizontal but the large pane is placed on the
         left and the others spread from top to bottom along the right.
         See the main-pane-width window option.

 tiled   Panes are spread out as evenly as possible over the window in
         both rows and columns.
</code></pre><p>但是默认的5种样式不能让我们自由的设定每个窗格的大小，所以我们要使用自定义的layout，在tmux中可以使用C-b + 方向键调整窗格的大小。tmuxinator中可以直接使用tmux中的layout值，在终端输入<code>tmux list-windows</code>可以查看每个窗口的layout值，我们只需将这个值写入tmuxinator项目配置配置中的layout即可。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2016/01/28/tmux-course-terminal-manage/" data-id="ciwhh0l1l005qfraznzaf6dr0" class="article-share-link">分享到</a><div class="tags"></div><div class="post-nav"><a href="/2016/02/04/node-tap-course-test-node-program/" class="pre">Node-Tap教程：使用node-tap测试你的node.js程序</a><a href="/2016/01/27/Koa-Pagination/" class="next">Koa Pagination</a></div><div data-thread-key="2016/01/28/tmux-course-terminal-manage/" data-title="使用tmux、tmuxinator管理你的终端窗口" data-url="http://yoursite.com/2016/01/28/tmux-course-terminal-manage/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2016/01/28/tmux-course-terminal-manage/" data-title="使用tmux、tmuxinator管理你的终端窗口" data-url="http://yoursite.com/2016/01/28/tmux-course-terminal-manage/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/news/">news</a><span class="category-list-count">76</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech/">tech</a><span class="category-list-count">35</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/android-nosql-realm-couchbase/" style="font-size: 15px;">android,nosql,realm,couchbase</a> <a href="/tags/CI-Appium/" style="font-size: 15px;">CI,Appium</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/12/09/2015-12-8-scapy/">scapy与路由轨迹图</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/05/AppiumTestCase-Python/">Appium Test Case-Python篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/how-to-use-react-native-navigator/">如何使用react native中的Navigator组件</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/25/jinkens-PitRecords/">Jinkens+踩坑纪录</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/22/jinkens-iOSTest/">Jinkens+iOS测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/22/appium-nodeTest/">Appium+nodeJS测试用例编写</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/06/recovering-a-wiredtiger-collection-from-a-corrupt-wt-file/">从损坏的wt文件中恢复出WiredTiger集合</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/13/best-practice-of-config-for-nodejs-projects/">Nodejs项目配置文件最佳实践</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/16/appium-test/">Appium+Eclipse编写测试用例</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/16/appium-config/">Mac环境下如何配置Appium</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://yangcong345.com/" title="洋葱数学官网" target="_blank">洋葱数学官网</a><ul></ul><a href="https://github.com/guanghetv/" title="Github主页" target="_blank">Github主页</a><ul></ul><a href="https://facebook.github.io/react-native/" title="ReactNative" target="_blank">ReactNative</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">光合新知技术博客.</a> Tech<a rel="nofollow" target="_blank" href="https://hexo.io"></a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"></a> <a rel="nofollow" target="_blank" href="https://github.com/pagecho"></a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'antsun'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>